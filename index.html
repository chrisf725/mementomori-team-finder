<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-98L1LJKST2"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-98L1LJKST2');
    </script>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="styles.css">
    <!-- <link href='https://fonts.googleapis.com/css?family=Alegreya' rel='stylesheet'> -->
    <title>MementoMori Team Finder</title>
</head>
<body>
    <header>
        <h1>MementoMori Team Finder</h1>
    </header>
    <br>
    <div class="info-box" id="infoBox">
        <button class="close-btn" id="closeInfoBox">X</button>
        <p>This tool is designed to help you find teams for selected characters that have been used by top players in the game MementoMori. 
            Only top 20 in Battle League and top 50 in Legend League is accounted for. It does not reflect the majority of players.</p>
        <p>This was made using the API provided by <a href="https://mentemori.icu/">this site</a>. Please ensure you have a stable
            internet connection when using the team finder.</p>
        <h2>How the data is being calculated</h2>
        <p>If a player is in both Battle League and Legend League, and if the teams for both modes are the same, only one of the teams will 
            be shown irregardless of team position. If a player
            has unique teams for Battle League and Legend League, both teams will be shown.
        </p>
        <p>The character usage rate displays the percentage of all characters' usage in the selected game mode(s) and region(s).
            Duplicate teams by the same player will not be counted in the usage rate, and only one team will be counted.
            If a character is not shown on the usage rate, they have a usage rate of 0%.
        </p>
        <h2>How to use</h2>
        <p>- Select the character you would like to see the teams for</p>
        <p>- Choose one or more leagues (not selecting anything defaults to having selecting all)</p>
        <p>- Choose one or more servers (not selecting anything defaults to having selecting all)</p>
        <p>- Click the "Find Teams" button to get the results</p>
        <p>- Search for a specific teammate with the chosen character to see teams containing those two characters</p>
        <h2>Update 11/16</h2>
        <p>- Added filter by rarity</p>
    </div>
    <br>
    <main>
    <div class="center-container">
        <div class="filter-dropdown">
            <label for="soulColorFilter">Filter selection by Soul Color:</label>
            <select id="soulColorFilter">
                <option value="">All</option>
                <option value="Azure">Azure</option>
                <option value="Crimson">Crimson</option>
                <option value="Emerald">Emerald</option>
                <option value="Amber">Amber</option>
                <option value="Radiance">Radiance</option>
                <option value="Chaos">Chaos</option>
            </select>
        </div>
    </div>
    <div class="center-container">
        <div class="custom-dropdown">
            <button class="dropdown-button" style="width: 144px;">Select character</button>
            <div class="dropdown-content" id="characterDropdown"></div>
        </div>
    </div>
    <br><br>
    <div class="center-container">
    <div class="checkbox-group">
        <label>
            <input type="checkbox" id="BL" name="league">Battle League
        </label>
        <label>
            <input type="checkbox" id="LL" name="league">Legend League
        </label>
    </div>
    </div>
    <div class="center-container">
    <div class="checkbox-group2">
        <label>
            <input type="checkbox" id="KR" name="region" value="19to20">Korea
        </label>
        <label>
            <input type="checkbox" id="ASIA" name="region" value="21to22">Asia
        </label>
        <label>
            <input type="checkbox" id="NA" name="region" value="23to24">America
        </label>
        <label>
            <input type="checkbox" id="EU" name="region" value="25">Europe
        </label>
        <label>
            <input type="checkbox" id="GLB" name="region" value="26to27">Global
        </label>
        <label>
            <input type="checkbox" id="JP" name="region" value="37to66">Japan
        </label>
    </div>
    </div>
    <br>
    <div class="center-container">
        <button id = "getTeam" class="btn-primary">Find Teams</button>
    </div>
    <br><br>
    <div id="progressBarContainer" class="progress-bar-container" style="display: none">
        <div id="progressBar" class="progress-bar"></div>
    </div>
    <div id="resultsHeader">
        <div id="searchContainer">
            <input type="text" id="searchInput" placeholder="Search for a teammate...">
        </div>
        <div id="rarityFilterContainer">
            <label for="rarityFilter">Filter by Rarity:</label>
            <select id="rarityFilter">
                <option value="">All rarities</option>
                <option value="1">N</option>
                <option value="2">R</option>
                <option value="4">R+</option>
                <option value="8">SR</option>
                <option value="16">SR+</option>
                <option value="32">SSR</option>
                <option value="64">SSR+</option>
                <option value="128">UR</option>
                <option value="256">UR+</option>
                <option value="512">LR</option>
                <option value="1024">LR+</option>
                <option value="2048">LR+2</option>
                <option value="4096">LR+3</option>
                <option value="8192">LR+4</option>
                <option value="16384">LR+5</option>
                <option value="32768">LR+6</option>
                <option value="65536">LR+7</option>
                <option value="131072">LR+8</option>
                <option value="262144">LR+9</option>
                <option value="524288">LR+10</option>
            </select>
        </div>
        <div id="selectedCharacterCountContainer"></div>
    </div>
    <div id="resultsContainer">
        
        <div id="resultsTable"></div>
        <div id="paginationControls"></div>
        <div id="rarityBarGraphContainer"></div>
        <div id="stats-container">
            <div id="topTeammates"></div>
            <div id="usageRatesContainer"></div>
        </div>
    </div>
    </main>
    <div id="statsModal" class="modal">
        <div class="modal-content">
            <span id="modalClose" class="close">&times;</span>
            <h2 id="modalCharacterName"></h2>
            <p id="modalCharacterStats"></p>
            <p id="modalCharacterEquipment"></p>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>